---
title: "Google Data Analytics Capstone Project"
output:
  word_document: default
  pdf_document: default
  html_notebook:
    theme: cerulean
---

# Introduction:

In recent years, the fitness industry has seen a surge in demand for health-focused smart products. Bellabeat, a high-tech company, has established itself as a key player in this market by manufacturing fitness tracking devices that cater specifically to women. Their products, which include the Bellabeat App, Leaf Fitness Tracker, Time Wellness Watch, Spring Smart Water Bottle, and Bellabeat Membership Plan, enable users to collect data on activity, sleep, stress, and reproductive health, thus empowering them with knowledge about their own health and habits.

As a data analyst, the objective is to clean, analyze, and report findings on Bellabeat's fitness tracking data. The stakeholders in this analysis are Urška Sršen, the Bellabeat co-founder and CCO, Sando Mur, the Bellabeat co-founder, and the Bellabeat Marketing Analytics team. The primary goal of this analysis is to identify trends and patterns in the usage of Bellabeat's smart fitness devices that will help identify potential opportunities for growth in the industry.

# Data Cleaning:

Before proceeding with the analysis, data cleaning is necessary to ensure the accuracy of the findings. The data collected from Bellabeat's fitness tracking devices contains missing and erroneous values that must be cleaned to avoid skewing the results. Additionally, data outliers must be identified and removed to prevent them from affecting the overall findings.

# Data Analysis:

Once the data is cleaned, data analysis will be conducted to identify trends and patterns in the usage of Bellabeat's fitness tracking devices. The analysis will be performed on the various metrics collected by the devices, including activity, sleep, stress, and reproductive health. Correlations between these metrics will be explored to identify relationships between them that may provide insight into the users' health and habits.

# Findings:

The findings from the analysis will be presented in a comprehensive report, which will highlight the trends and patterns identified in the usage of Bellabeat's fitness tracking devices. The report will provide insights into user behavior, including the most popular features and the times of day when the devices are most frequently used. The report will also provide recommendations on potential opportunities for growth in the industry, based on the analysis of the data.

I will be using Google's Data Analytics process and here is summary:

Ask: The first step is to define the problem statement and ask relevant questions that the analysis should answer. In this case, the objective is to identify trends and patterns in the usage of Bellabeat's fitness tracking devices to identify potential opportunities for growth in the industry.

Prepare: In the second step, data is gathered from various sources and prepared for analysis. This includes cleaning and transforming the data to ensure its accuracy and suitability for analysis.

Process: The third step involves organizing and manipulating the data to make it suitable for analysis. This includes sorting, filtering, and grouping the data as needed.

Analyze: In the fourth step, the prepared data is analyzed using statistical methods and visualizations to identify trends and patterns. This step involves exploring correlations between different metrics to derive insights.

Share: In the fifth step, the findings from the analysis are presented in a comprehensive report that is easily understood by stakeholders. This step involves communicating the insights in a clear and concise manner.

Act: In the final step, the recommendations based on the analysis are implemented to drive business growth. This step involves taking action based on the insights derived from the analysis and monitoring the impact of those actions on the business


# Ask

## Business Task

Find trends and patterns in smart device usage and then relate these trends to one of the Bellabeat products to help improve the marketing strategy and the overall business growth of Bellabeat.

### Questions that will guide our Analysis:

1.  What are some trends in smart device usage?

2.  How could these trends apply to Bellabeat customers?

3.  How could these trends help influence Bellabeat marketing strategy?

# Prepare

### Dataset used

The data source used for our case study is Fitbit Fitness Tracker Data. This dataset is stored in Kaggle and was made available through Mobius. It is an Open-Source dataset. This data set contains personal fitness tracker from thirty Fitbit users.

### Dataset Organization

There are a total of 18 .CSV files. Each subject has a unique ID and the data is recorded with a date and time stamp. Each row in the data is a new observation this results in the data being in long format.

### Dataset Integrity

The data only has thirty participants which is the minimum sample size for a decent analysis. There is sampling bias since it does not include any gender information. This could mean that the data might include data for men, which is not useful for Bellabeat. The data also only covers 1 month of activity which is a noticeably short period for the analysis.

# Process

I will be using RStudio for my analysis because of the size of the data and reproducibility that R offers. R is also useful when visualizing data for stakeholders.


### Packages Used for Analysis:

-   Tidyverse

-   Janitor

-   Lubridate

-   Skimr

-   ggplot2

-   dlpry

-   readr

1.  Installing packages needed

    ```{r echo=TRUE}

    # Installing Packages

    install.packages('tidyverse')
    install.packages('janitor')
    install.packages('lubridate')
    install.packages('skimr')
    install.packages('ggplot2')
    install.packages('dlpry')
    install.packages('readr')
    ```

2.  Loading packages installed

    ```{r echo=TRUE}

    # Load Packages

    library(tidyverse)
    library(janitor)
    library(lubridate)
    library(skimr)
    library(ggplot2)
    library(dplyr)
    library(readr)
    ```

3.  Importing datasets needed for analysis

    ```{r echo=TRUE}

    # Import the Datasets

    daily_activity <- read_csv('dailyActivity_merged.csv')
    daily_sleep <- read_csv('sleepDay_merged.csv')
    daily_steps <- read_csv('dailySteps_merged.csv')
    daily_intensities <- read_csv('dailyIntensities_merged.csv')
    hourly_steps <- read_csv('hourlySteps_merged.csv')
    ```

4.  Preview raw data

    ```{r echo=TRUE}

    # daily_activity

    head(daily_activity) 
    n_unique(daily_activity$Id) 
    sum(duplicated(daily_activity)) 

    # daily_sleep

    head(daily_sleep) 
    n_unique(daily_sleep$Id) 
    sum(duplicated(daily_sleep)) 

    # daily_steps

    head(daily_steps) 
    n_unique(daily_steps$Id) 
    sum(duplicated(daily_steps)) 

    # daily_intensities

    head(daily_intensities) 
    n_unique(daily_intensities$Id) 
    sum(duplicated(daily_intensities)) 

    # hourly_steps

    head(hourly_steps) 
    n_unique(hourly_steps$Id) 
    sum(duplicated(hourly_steps)) 
    ```

### First impressions of the data:

**daily_activity:** 15 columns \* 940 Rows (33 unique id's, 0 duplicates)

**daily_sleep:** 5 columns \* 413 Rows (24 unique id's, 3 duplicates)

**daily_steps:** 3 columns \* 940 Rows (33 unique id's, 0 duplicates)

**daily_intensities:** 10 columns \* 940 Rows (33 unique id's, 0 duplicates)

**hourly_steps:** 3 columns \* 22099 Rows (33 unique id's, 0 duplicates)

\*Data includes column names with upper and lowercase letters as well as duplicates and inconsistent dates.

### Data cleaning

-   Correcting consistency of the date formats

```{r echo=TRUE}

# Correcting consistency of dates

daily_activity <- daily_activity %>% 
  rename(date = ActivityDate) %>%
  mutate(date = as_date(date, format = "%m/%d/%Y"))

daily_sleep <- daily_sleep %>% 
  rename(date = SleepDay) %>%
  mutate(date = as_date(date, format = "%m/%d/%Y %I:%M:%S %p"))

daily_steps <- daily_steps %>% 
  rename(date = ActivityDay) %>%
  mutate(date = as_date(date, format = "%m/%d/%Y"))

daily_intensities <- daily_intensities %>% 
  rename(date = ActivityDay) %>%
  mutate(date = as_date(date, format = "%m/%d/%Y"))

hourly_steps <- hourly_steps %>%
  rename(date_time = ActivityHour) %>%
  mutate(date_time = as.POSIXct(date_time, format = "%m/%d/%Y %I:%M:%S %p", tz = Sys.timezone()))
```

-   Cleaning column names

```{r echo=TRUE}

# Cleaning column names

clean_names(daily_activity)
daily_activity <- rename_with(daily_activity, tolower)

clean_names(daily_sleep)
daily_sleep <- rename_with(daily_sleep, tolower)

clean_names(daily_steps)
daily_steps <- rename_with(daily_steps, tolower)

clean_names(daily_intensities)
daily_intensities <- rename_with(daily_intensities, tolower)

clean_names(hourly_steps)
hourly_steps <- rename_with(hourly_steps, tolower)

```

-   Removing duplicates

```{r echo=TRUE}

# Removing duplicates

daily_sleep <- distinct(daily_sleep)

# Checking if all duplicates are removed

sum(duplicated(daily_sleep))
```

### Transforming data

-   Merging data from daily_activity and daily_sleep

```{r echo=TRUE}

# Merging data

daily_activity_sleep <- merge(daily_activity, daily_sleep, by = c('id','date'))
```

-   Adding a column for week days

```{r echo=TRUE}

# Adding a column for weekdays

daily_activity_sleep <- daily_activity_sleep %>%
  mutate(week_day = weekdays(date))
```

7.  Preview of clean data

```{r echo=TRUE}

# Preview of Clean data

head(daily_activity)
head(daily_sleep)
head(daily_steps)
head(daily_intensities)
head(hourly_steps)
head(daily_activity_sleep)
```

# Analysis

Questions we will be asking in order to identify trends and patterns:

1.  How often do users use their devices in a month?

2.  Time spent in bed vs time spent asleep

3.  The relationship between steps and amount of sleep

4.  On which days of the week are users most active?

5.  Which times of the day are users most active?


### Summary of data

```{r eval=FALSE, include=FALSE}

# Summaries


summarise(daily_activity)
summarise(daily_sleep)
summarise(daily_steps)
summarise(daily_intensities)
summarise(hourly_steps)
summarise(daily_activity_sleep)
```

### Initial Analysis

Customers' average daily steps are 7638, their average distance is 5.490, and their average calories are 2304.

The average amount of sleep every night is around 6 hours, which is only suitable for some age groups and not for others.

The main finding from this process is that there are 33 users who update their daily activity, 24 users who update their sleep activity.


## 1. How often do users use their devices in a month?

```{r echo=TRUE}

# Calculate how often users use their devices in a month


user_type <- daily_activity %>% 
  group_by(id) %>% 
  summarise(days_used = n())

user_type <- user_type %>% 
  mutate(usage = case_when(
    days_used >= 0 & days_used < 11 ~ "rarely"
    ,days_used >= 11 & days_used < 21 ~ "often"
    ,days_used >= 21 ~ "regularly"))
```

```{r echo=TRUE}

# Converting to percentage for easier visualization

user_type_percent <- user_type %>% 
  group_by(usage) %>% 
  summarise(total = n()) %>% 
  mutate(totals = sum(total)) %>% 
  group_by(usage) %>% 
  summarise(total_percent = total / totals) %>% 
  mutate(labels = scales::percent(total_percent))

user_type_percent$usage <- factor(user_type_percent$usage, levels = c("regularly", "very often", 
                                                                      "often", "rarely"))
```

```{r echo=TRUE}

# Visualizing how often users use their devices in a month

plot1 <- ggplot(user_type_percent, aes(x="", y= total_percent, fill = usage))+
  geom_bar(stat = "identity", width = 1)+
  coord_polar("y", start = 0)+
  theme_void()+
  geom_text(aes(label = labels),
            position = position_stack(vjust = 0.5))+
  scale_fill_manual(values = c("#00BFC4","#FF00FF","#00BE67"),
                    labels = c("Regularly - 22 to 31 days",
                               "Often - 11 to 21 days",
                               "Rarely - 0 to 11 days"))+
  labs(title = "Device usage in a Month")

plot1
```

**Findings**:

Most of the users use their devices regularly in a month but there are a few user that rarely use their devices. This suggests that users who own smart fitness devices will most probably use them on a regular bases.
The findings could be attributed to several factors, including:

Motivation: Customers who are highly motivated to improve their fitness and health are more likely to use their smart fitness devices regularly. On the other hand, customers who lack motivation or are not interested in fitness may rarely use their devices.

Age: Age could be another factor. Older customers may not be as motivated to use their devices regularly compared to younger customers.

Fitness level: Customers who are already fit may not see the need to use their smart fitness devices regularly, while those who are trying to improve their fitness may be more likely to use them.

Technical difficulties: Some customers may face technical difficulties when using their smart fitness devices, which could discourage them from using them regularly.

Busy lifestyle: Customers with busy lifestyles may not find the time to use their devices regularly, while those with more free time may be more likely to use them.

In conclusion, while most of Bellabeat's customers use their smart fitness devices regularly, the reasons why some customers rarely use their devices could be due to a variety of factors. It is important for Bellabeat to understand these factors and take them into consideration when developing marketing strategies to improve overall business growth.


## 2. Time spent in bed vs time spent asleep

```{r echo=TRUE}

# Calculate the time it takes for users to fall asleep

time_to_sleep <- daily_sleep %>%
  mutate(time_taken = (totaltimeinbed - totalminutesasleep)- 10)

time_to_sleep <- time_to_sleep %>%
  group_by(id) %>%
  summarise(avg_time_taken = mean(time_taken))
```

```{r echo=TRUE}

# Categorizing users based on amount of minutes it takes to fall asleep

time_to_sleep <- time_to_sleep %>%
  mutate(fel_asleep = case_when(
    avg_time_taken >= 0 & avg_time_taken < 15 ~ "very quickly"
    ,avg_time_taken >= 15 & avg_time_taken < 30 ~ "quickly"
    ,avg_time_taken >= 30 & avg_time_taken < 50 ~ "slowly"
    ,avg_time_taken >= 50 ~ "very slowly"))
time_to_sleep$fel_asleep <- factor(time_to_sleep$fel_asleep, levels = c("very quickly","quickly","slowly","very slowly" ))
time_to_sleep <- drop_na(time_to_sleep)
```

```{r echo=TRUE}

# Converting to percentages to visualize easier

time_to_sleep_percent <- time_to_sleep %>%
  group_by(fel_asleep) %>%
  summarise(total = n()) %>%
  mutate(totals = sum(total)) %>%
  group_by(fel_asleep) %>%
  summarise(total_percent = total/totals) %>%
  mutate(labels = scales::percent(total_percent))
```

```{r echo=TRUE}

# Visualizing time it takes for users to fall asleep

plot2 <- ggplot(time_to_sleep_percent, aes(x="", y= total_percent, fill = fel_asleep))+
  geom_bar(stat = "identity", width = 1)+
  coord_polar("y", start = 0)+
  theme_void()+
  geom_text(aes(label = labels),
            position = position_stack(vjust = 0.5))+
  scale_fill_manual(values = c("#0CB702","#00e673","#80ffbf", "#E68613"),
                    labels = c("Very quickly - 0 to 14 minutes",
                               "Quickly - 15 to 29 minutes",
                               "Slowly - 30 to 49 minutes",
                               "Very slowly - more than 50 minutes"))+
  labs(title = "Time taken to fall Asleep")

plot2
```

```{r echo=TRUE}

# Visualization of time spent in bed and time sleeping

plot3 <- ggplot(daily_sleep, aes(x = totalminutesasleep, y = totaltimeinbed)) + geom_point() + geom_smooth(method = 'loess', formula = 'y ~ x') + labs(title = "Time actually sleeping v.s Time spent in bed")
plot3
```

**Findings**:

During the data analysis, we found that most of Bellabeat's customers fall asleep quickly after going to bed, while there is a small percentage of users who take a long time to fall asleep.

Several factors could contribute to this finding, including:

Age: As people age, it may take longer for them to fall asleep. It is possible that the users who take longer to fall asleep are older on average than those who fall asleep quickly.

Sleep habits: The users who take longer to fall asleep may have different sleep habits than those who fall asleep quickly. For example, they may have irregular sleep schedules or engage in activities that make it harder to fall asleep quickly.

Stress and anxiety: Users who are experiencing high levels of stress and anxiety may have a harder time falling asleep quickly. Those who are less stressed and anxious may be more likely to fall asleep quickly.

Health issues: Certain health conditions can affect a person's ability to fall asleep quickly, such as sleep apnea, restless leg syndrome, and chronic pain. It is possible that some of the users who take longer to fall asleep have these or other health issues.

Environmental factors: External factors such as noise, light, and temperature can affect a person's ability to fall asleep quickly. It is possible that the users who take longer to fall asleep are exposed to more disruptive environmental factors than those who fall asleep quickly.

Overall, the finding that some users take longer to fall asleep could be due to a variety of factors. It is important for Bellabeat to understand these factors and take them into consideration when developing products and services that aim to improve sleep quality for their customers.


## 3. The relationship between steps and amount of sleep

```{r echo=TRUE}

# Correlation between Steps walked and amount of sleep

daily_steps_sleep <- daily_activity_sleep %>% 
  group_by(id) %>% 
  summarise(total_steps = sum(totalsteps), total_sleepminutes = sum(totalminutesasleep))
```

```{r echo=TRUE}

# Visualizing Correlation between steps and sleep

plot4 <- ggplot(daily_steps_sleep, aes(x= total_steps, y= total_sleepminutes))+
  geom_point(fill = "green")+
  geom_smooth(color = "blue", method = 'loess', formula = 'y ~ x')+
  labs(title = "Steps walked Vs Minutes asleep", x= "Total Steps", y= "Total Sleep(minutes)")

plot4
```

**Findings**:

During our analysis, we found a positive relationship between the amount of sleep and the number of steps taken by Bellabeat's users. This suggests that taking more steps during the day may lead to better sleep at night.

Several factors could contribute to this finding, including:

Physical activity: People who are more physically active during the day tend to sleep better at night. It is possible that the users who take more steps are more active during the day, which in turn helps them sleep better at night.

Sleep quality: The users who take more steps may also have better sleep quality, which could contribute to the positive relationship between steps and sleep. Better sleep quality could result in feeling more rested and energized, which in turn could lead to being more active during the day.

Health and lifestyle: Users who take more steps may be more health-conscious and have a healthier lifestyle overall, which could contribute to better sleep quality. Additionally, users who prioritize exercise and physical activity may also prioritize getting enough sleep to support their active lifestyle.

Self-monitoring: It is possible that the act of tracking steps and sleep using a fitness tracker motivates users to be more active during the day and prioritize their sleep at night.

Overall, the finding that there is a positive relationship between steps and sleep suggests that physical activity during the day could have a positive impact on sleep quality at night. Bellabeat can use this information to develop products and services that encourage users to be more active during the day and improve their sleep quality at night.

Additional:
This is excellent research which supports these findings: "Physical Activity and Sleep: A Review" by Kredlow et al. (2015), which summarizes the existing research on the relationship between physical activity and sleep.


## 4. On which days of the week are users most active?

```{r echo=TRUE}

# Which days of the week are users most active

weekday_steps_sleep <- daily_activity_sleep 

weekday_steps_sleep$week_day <- ordered(weekday_steps_sleep$week_day, levels = c("Monday", "Tuesday", "Wednesday", "Thursday",
                                                                                 "Friday", "Saturday", "Sunday"))

weekday_steps_sleep <- weekday_steps_sleep %>%
  group_by(week_day) %>%
  summarise(daily_steps = mean(totalsteps), daily_sleep = mean(totalminutesasleep))
```

```{r echo=TRUE}

# Visualizing which days of the week users were most active

plot5 <-  ggplot(weekday_steps_sleep) +
  geom_col(mapping = aes(week_day, daily_steps), fill = "#00A9FF")+
  labs(title = "Steps per day of the week", x= "Weekday", y= "Daily Steps")+
  geom_hline(yintercept = 7500)
plot5
```

```{r echo=TRUE}

# Visualizing sleep per day of the week

plot6 <-  ggplot(weekday_steps_sleep)+
 geom_col(aes(x= week_day, y= daily_sleep), fill = "#C77CFF")+
 geom_hline(yintercept = 420)+
 labs(title = "Sleep per Weekday", x= "Weekday", y= "Daily Sleep")

plot6
```

**Findings**:

Users are most active on Saturdays while they are least active on Sundays. Users normally reach the recommended 7500 steps every day except on Sundays.

There could be several possible reasons why users are most active on Saturdays and less active on Sundays:

Work schedules: Many people have a Monday to Friday work schedule and may have more time to engage in physical activity on Saturdays than on weekdays. On Sundays, people may be resting and recovering from the previous week, leading to lower levels of activity.

Social activities: Saturdays are often associated with social activities, such as sports games, hiking, or other outdoor activities. On the other hand, Sundays are often considered as rest days or family days, which may not involve much physical activity.

Exercise routines: Some people may have a specific exercise routine that they follow, and this routine may be less frequent or absent on Sundays.

Other commitments: Users may have other commitments on Sundays, such as attending religious services or family events, which may limit their time for physical activity.

As for the finding that users do not reach the recommended 7500 steps on Sundays, this could be related to the above reasons, or users may simply be taking a day off from physical activity to rest and recover.


## 5. Which times of the day are users most active?

```{r echo=TRUE}

# Calculate which time of day users are most active by separating date and time

hourly_steps <- hourly_steps %>%
  separate(date_time, into = c("date", "time"), sep= " ") %>%
  mutate(date = ymd(date))
```

```{r echo=TRUE}

# Visualizing what time of day users are most active

plot8 <- hourly_steps %>%
  group_by(time) %>%
  summarise(avg_steps = mean(steptotal)) %>%
  ggplot(aes(x= time, y= avg_steps, fill = avg_steps))+
  geom_col()+
  labs(title = "Steps walked throughout the Day", x= 'Time of the day', y= "Steps")+
  theme(axis.text.x = element_text(angle = 90))

plot8
```

**Findings**:

Users are most active in the evening (17:00 - 19:00) and second most in the afternoon (12:00 -- 14:00).

User activity declines during the night from 22:00 to 05:00.

Possible reasons for these findings could include:

Work schedules: Many people have jobs that require them to be active during the day and sitting at a desk in the evening, which could explain why activity is highest in the afternoon and evening.

Social activities: People may be more active in the evening because they are more likely to engage in social activities such as going out with friends or participating in sports leagues.

Sleep: The decline in activity during the night could be due to users being asleep during this time, which is a normal part of their daily routine.

Weather: The time of day that people are most active could also be influenced by weather patterns. For example, people may be more likely to go for a run or walk during cooler temperatures in the evening rather than during the hotter parts of the day.

*It's important to note that these are just possible reasons and further analysis and research would be needed to confirm or refute them.

# Share

### Recommendations:


Based on the findings from the analysis, here are some recommendations for Bellabeat:

Promote regular device usage: Since most users who own smart fitness devices use them on a regular basis, Bellabeat should focus on encouraging regular usage of their products. This can be achieved through personalized reminders, gamification and social media campaigns.

Improve sleep tracking features: As sleep has been shown to be an important factor in overall health, Bellabeat should consider improving their sleep tracking features. This could include providing personalized sleep recommendations, tracking sleep quality and duration, and offering tips for improving sleep hygiene.

Promote weekend activity: As users are least active on Sundays, Bellabeat could offer weekend challenges and promotions to encourage users to be more active during weekends. This could include partnering with fitness influencers or offering discounts on membership plans.

Emphasize the benefits of daytime activity: As users are most active in the evening and afternoon, Bellabeat could emphasize the benefits of daytime activity, such as increased productivity and energy, through social media campaigns and personalized notifications.

Expand the range of products: Bellabeat could consider expanding their product range to include devices that are specifically designed for certain activities, such as swimming or cycling, to attract a wider range of customers.

Overall, by implementing these recommendations, Bellabeat can improve their marketing strategy and increase customer engagement and satisfaction, leading to overall growth of the business.


*Disclaimer: It is important to note that the findings and recommendations presented in this report are based on a relatively small sample size of 30 participants from the Fitbit Fitness Tracker Data. While efforts were made to ensure the data was accurate and representative, the results may not be applicable to the broader population. Thus, further analysis with a larger and more diverse sample is needed to validate these findings and recommendations.
